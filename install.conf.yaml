- clean: ['~']

- link:
    ~/.bash_profile:
        path: bash_profile
        force: true
    ~/.bashrc:
        path: bashrc
        force: true
    ~/.gitconfig:
        path: gitconfig
        force: true
    ~/.vimrc:
        path: vimrc
        force: true
    ~/.zshrc:
        path: zshrc
        force: true
    ~/.config/nvim/init.vim:
        path: init.vim
        create: true
        force: true
    ~/.config/Code/User/keybindings.json:
        path: .vscode/keybindings.json
        create: true
        force: true
    ~/.config/Code/User/settings.json:
        path: .vscode/settings.json
        create: true
        force: true
    ~/.config/terminator/config:
        path: .terminator/config
        create: true
        force: true
    ~/.config/ghostty/config:
        path: .config/ghostty/config
        create: true
        force: true

    # Claude Code configuration
    ~/.claude/settings.json:
        path: .claude/settings.json
        create: true
        force: true
    ~/.claude/settings.local.json:
        path: .claude/settings.local.json
        create: true
        force: true
    ~/.claude/CLAUDE.md:
        path: .claude/CLAUDE.md
        create: true
        force: true
    ~/.claude/hooks:
        path: .claude/hooks
        create: true
        force: true
    ~/.claude/agents:
        path: .claude/agents
        create: true
        force: true
    ~/.claude/commands:
        path: .claude/commands
        create: true
        force: true
    ~/.claude/skills:
        path: .claude/skills
        create: true
        force: true
    ~/.claude/thoughts:
        path: .claude/thoughts
        create: true
        force: true

    # MCP configuration
    ~/.config/Code/User/mcp.json:
        path: .config/Code/User/mcp.json
        create: true
        force: true

- shell:
    -
        command: |
            if ! grep -qE 'Ubuntu|Debian' /etc/os-release 2>/dev/null; then
                echo "Warning: This install script is designed for Ubuntu/Debian. Some commands may fail."
            fi
        description: Checking OS compatibility...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v vim >/dev/null 2>&1 || sudo apt-get install -y vim
        description: Installing vim...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v zsh >/dev/null 2>&1 || sudo apt-get install -y zsh
        description: Installing zsh...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v direnv >/dev/null 2>&1 || sudo apt-get install -y direnv
        description: Installing direnv...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v bison >/dev/null 2>&1 || sudo apt-get install -y bison
        description: Installing bison (required for gvm)...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev curl git libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev
        description: Installing pyenv build dependencies...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -d ~/.oh-my-zsh ] || sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended'
        description: Installing oh-my-zsh...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -f ~/.oh-my-zsh/themes/igorsilva.zsh-theme ] || curl -fsSL https://raw.githubusercontent.com/igor9silva/zsh-theme/master/igorsilva.zsh-theme > ~/.oh-my-zsh/themes/igorsilva.zsh-theme'
        description: Installing igorsilva zsh theme...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -d ~/.fzf ] || (git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf && ~/.fzf/install --all)'
        description: Installing fzf...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -d ~/.gvm ] || zsh < <(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)'
        description: Installing gvm...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v fnm >/dev/null 2>&1 || curl -fsSL https://fnm.vercel.app/install | bash
        description: Installing fnm...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -d ~/.pyenv ] || curl -fsSL https://pyenv.run | bash'
        description: Installing pyenv...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: '[ -d ~/.pyenv/plugins/pyenv-virtualenv ] || git clone https://github.com/pyenv/pyenv-virtualenv.git ~/.pyenv/plugins/pyenv-virtualenv'
        description: Installing pyenv-virtualenv...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v ghostty >/dev/null 2>&1 || /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/mkasberg/ghostty-ubuntu/HEAD/install.sh)"
        description: Installing Ghostty...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v terminator >/dev/null 2>&1 || sudo apt-get install -y terminator
        description: Installing Terminator...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v flameshot >/dev/null 2>&1 || sudo apt-get install -y flameshot
        description: Installing Flameshot...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v flatpak >/dev/null 2>&1 || sudo apt-get install -y flatpak
        description: Installing Flatpak...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: flatpak list | grep -q Kooha || flatpak install -y flathub io.github.seadve.Kooha
        description: Installing Kooha (screen recorder)...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v code >/dev/null 2>&1 || (curl -fsSL -o /tmp/vscode.deb "https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64" && sudo apt install -y /tmp/vscode.deb && rm /tmp/vscode.deb)
        description: Installing VS Code...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: command -v claude >/dev/null 2>&1 || curl -fsSL https://claude.ai/install.sh | bash
        description: Installing Claude Code CLI...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: cat .vscode/extensions.txt | xargs -L 1 echo code --install-extension | bash
        description: Installing VSCode extensions...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: ./install-iosevka.sh
        description: Installing Iosevka font...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
    -
        command: ./install-swap.sh
        description: Configuring swap (32GB, swappiness=10)...
        quiet: false
        stdin: true
        stdout: true
        stderr: true
